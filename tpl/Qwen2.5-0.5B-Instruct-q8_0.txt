FROM ../Qwen2.5-0.5B-Instruct-q8_0.gguf

PARAMETER temperature 0.75
PARAMETER top_p 0.6
PARAMETER top_k 40
PARAMETER repeat_penalty 1
PARAMETER min_p 0.05
PARAMETER num_ctx 4096

# 设置对话终止符 - 不设置会导致对话无法结束
PARAMETER stop "<｜beginxofxsentence｜>"
PARAMETER stop "<｜endxofxsentence｜>"
PARAMETER stop "<｜User｜>"
PARAMETER stop "<｜Assistant｜>"

# 模板
TEMPLATE """{{- if .System }}{{ .System }}{{ end }}
{{- range $i, $_ := .Messages }}
{{- $last := eq (len (slice $.Messages $i)) 1}}
{{- if eq .Role "user" }}<｜User｜>{{ .Content }}
{{- else if eq .Role "assistant" }}<｜Assistant｜>{{ .Content }}{{- if not $last }}<｜endxofxsentence｜>{{- end }}
{{- end }}
{{- if and $last (ne .Role "assistant") }}<｜Assistant｜>{{- end }}
{{- end }}"""
